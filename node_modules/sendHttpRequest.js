var http = require('http'),
    querystring = require('querystring'),
    util = require('util'),
    url = 'http://fe.baidu.com/push/simpleTasks/finish';
    
exports.httpRequest = function(data){
    var data = querystring.stringify({
            id: data.uuid,
            summary: '',
            detail: ''
        }),
        req = http.request({
            hostname: 'fe.baidu.com',
            port: 80,
            path: '/pagetimeline/db/insertTracker.php',
            method: 'POST',
            headers: {
                "Content-Type": 'application/x-www-form-urlencoded',
                "Content-Length": data.length
            }
        }, function(res){
            console.log('STATUS: ' + res.statusCode + ', URL: insertTracker.php');
            res.setEncoding('utf8');
            res.on('end', function(){//数据完成，发送请求告诉任务管理器完成操作
                http.get(url + '?' + uerystring.stringify(data), function(res){
                    console.log(url + ' STATUS: ' + res.statusCode);
                    console.log('STATUS: ' + res.statusCode + ', URL: ' + url)
                    res.setEncoding('utf8');
                });
            });
        });
    
    req.write(data + '\n');
    req.end();
};